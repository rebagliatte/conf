<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title><%= yield(:title) %> - <%= current_conference.name %></title>
  <meta name="description" content="<%= current_edition.tagline %>">
  <meta name="viewport" content="width=device-width">
  <meta charset="utf-8">
  <%= stylesheet_link_tag 'application', media: 'all' %>
  <%= csrf_meta_tags %>
  <%= render partial: 'shared/analytics' %>
  <%= yield(:head_js) %>
</head>

<body>
  <header class="main-header">
    <nav>
      <h1>
        <%= link_to root_url do %>
          <%= image_tag current_edition.logo_url(:inline_x_30), alt: current_conference.name %>
        <% end %>
      </h1>
      <ul>
        <% if current_edition.live? %>
          <li><%= nav_link_to t('schedule'), conference_edition_slots_path(current_edition) %></li>
          <li><%= nav_link_to t('sponsors'), conference_edition_sponsors_path(current_edition) %></li>
          <li><%= nav_link_to t('speakers'), conference_edition_speakers_path(current_edition) %></li>
          <li><%= nav_link_to t('news'), conference_edition_posts_path(current_edition) %></li>
          <li><%= nav_link_to t('previous_editions'), conference_editions_path %></li>
          <li><%= nav_link_to t('register'), '#' %></li>
        <% else %>
          <li><%= anchor_nav_link_to t('call_for_proposals'), "#call-for-proposals" %></li>
          <li><%= anchor_nav_link_to t('sponsorship_packages'), "#sponsorship-packages" %></li>
          <% if current_edition.posts.any? %>
            <li><%= anchor_nav_link_to t('news'), "#news" %></li>
          <% end %>
          <% if current_edition.previous_editions.any? %>
            <li><%= anchor_nav_link_to t('previous_editions'), "#previous-editions" %></li>
          <% end %>
        <% end %>
      </ul>
    </nav>
    <%= render partial: 'shared/authentication' %>
    <%= render partial: 'shared/language_selector' %>
  </header>

  <main class="main-content">
    <% flash.each do |name, msg| %>
      <p class="alert alert-<%= name %>"><%= msg %></p>
    <% end %>

    <%= content_for?(:content) ? yield(:content) : yield %>
  </main>

  <footer class="main-footer">
    <% if current_edition.sponsors.any? %>
      <section class="sponsors">
        <%= render(partial: 'sponsors/list', locals: { conference_edition: current_edition, display_descriptions: false }) %>
      </section>
    <% end %>

    <section class="networks">
      <h1 class="hidden"><%= t 'networks' %></h1>
      <ul>
        <% if current_conference.twitter_username.present? %>
          <li><%= link_to t('follow_us_on_twitter'), "http://twitter.com/#{current_conference.twitter_username}", target: 'blank' %></li>
        <% end %>
        <% if current_conference.facebook_page_username.present? %>
          <li><%= link_to t('friend_us_on_facebook'), "http://facebook.com/#{current_conference.facebook_page_username}", target: 'blank' %></li>
        <% end %>
        <li><%= link_to t('drop_us_a_line'), "mailto:#{current_conference.email}", target: 'blank' %></li>
      </ul>
    </section>
  </footer>

  <%= javascript_include_tag 'application' %>
</body>
</html>
