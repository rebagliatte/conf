<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title><%= yield(:title).present? ? "#{yield(:title)} - #{ current_conference.name }" : "#{ current_conference.name }"  %></title>
  <meta name="description" content="<%= current_edition.tagline %>">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta charset="utf-8">
  <%= stylesheet_link_tag 'application', media: 'all' %>
  <%= stylesheet_link_tag current_edition.custom_css_file, media: 'all' %>
  <%= csrf_meta_tags %>
  <%= render partial: 'shared/analytics' %>
  <%= yield(:head_js) %>
</head>

<body class="<%= body_class %>">
  <div class="main-wrapper">

    <% if current_page?(root_url) %>
      <%= render(partial: 'shared/hero', locals: { conference_edition: current_edition, conference: current_conference }) %>
    <% end %>

    <% flash.each do |name, msg| %>
      <p class="alert-global alert alert-<%= name %>"><%= msg %></p>
    <% end %>

    <header class="main-header">
      <nav class="main-navigation">
        <h1 class="logo">
          <%= link_to root_url do %>
            <%= image_tag current_edition.logo_url, alt: current_conference.name %>
          <% end %>
        </h1>
        <%= render(partial: 'shared/navigation', locals: { conference_edition: current_edition }) %>
      </nav>
      <%= render(partial: 'shared/language_selector', locals: { conference: current_conference }) %>
    </header>

    <main class="main-content">
      <%= content_for?(:content) ? yield(:content) : yield %>
    </main>
  </div>

  <footer class="main-footer box box-primary">
    <% if current_edition.sponsors.any? %>
      <section class="sponsors">
        <%= render(partial: 'sponsors/list', locals: { conference_edition: current_edition, display_descriptions: false }) %>
      </section>
    <% end %>

    <% if current_edition.about %>
      <section class="about">
        <h1 class="primary-heading"><%= t('about') %> <%= current_conference.name %></h1>
        <%= markdown(current_edition.about) %>
      </section>
    <% end %>

    <section class="networks">
      <h1><%= t 'networks' %></h1>
      <ul>
        <% if current_conference.twitter_username.present? %>
          <li>
            <%= link_to "http://twitter.com/#{current_conference.twitter_username}", target: 'blank', class: 'twitter' do %>
              <%= content_tag(:span, t('follow_us_on_twitter')) %>
            <% end %>
          </li>
        <% end %>
        <% if current_conference.facebook_page_username.present? %>
          <li>
            <%= link_to "http://facebook.com/#{current_conference.facebook_page_username}", target: 'blank', class: 'facebook' do %>
              <%= content_tag(:span, t('friend_us_on_facebook')) %>
            <% end %>
          </li>
        <% end %>
        <li>
          <%= link_to "mailto:#{current_conference.email}", target: 'blank', class: 'email' do %>
           <%= content_tag(:span, t('drop_us_a_line')) %>
          <% end %>
        </li>
      </ul>
    </section>
  </footer>
  <a class="back-to-top box" href="#top"><span>Back to top</span></a>
  <div class="scripts">
    <%= javascript_include_tag :public %>
  </div>
</body>
</html>
